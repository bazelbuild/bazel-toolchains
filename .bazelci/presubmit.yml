---
buildifier: true
platforms:
  rbe_ubuntu1604:
    test_targets:
    - "//tests/config:ubuntu-xenial-autoconfig_test"
    # TODO(nlopezgi): reenable this test once bazel 0.19.2 is out
    #- "//tests/config:ubuntu-xenial-bazel-head-autoconfig_test"
    - "//tests/config:ubuntu-xenial-custom-bazel-rc-version-autoconfig_test"
    - "//tests/config:debian8_clang_autoconfig_test"
    - "//tests/config:external-repo-autoconfig_test"
    - "//tests/config:this-project-repo-autoconfig"
    - "//configs/ubuntu16_04_clang:default-ubuntu16_04-clang-1.1-bazel_0.18.0-autoconfig_test"
    - "//configs/ubuntu16_04_clang:msan-ubuntu16_04-clang-1.1-bazel_0.18.0-autoconfig_test"
    test_flags:
    - "--test_output=errors"
    - "--verbose_failures"
    - "--crosstool_top=@buildkite_config//cc:toolchain"
    - "--host_javabase=@buildkite_config//java:jdk"
    - "--javabase=@buildkite_config//java:jdk"
    - "--host_java_toolchain=@bazel_tools//tools/jdk:toolchain_hostjdk8"
    - "--java_toolchain=@bazel_tools//tools/jdk:toolchain_hostjdk8"
    - "--extra_execution_platforms=@buildkite_config//config:platform"
    - "--host_platform=@buildkite_config//config:platform"
    - "--platforms=@buildkite_config//config:platform"
    - "--extra_toolchains=@buildkite_config//config:cc-toolchain"
